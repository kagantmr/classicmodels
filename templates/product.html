{% extends "layout.html" %}
{% block content %}

<style>
  body {
    background-color: #1a1e2b;
    color: #e0e0e0;
  }

  /* Headings */
  h2 {
    color: #ffffff;
    font-weight: 700;
    letter-spacing: 0.5px;
  }

  /* Image container */
  .product-image-box {
    background-color: #252a37;
    border-radius: 16px;
    border: 1px solid #343a4d;
    box-shadow: 0 6px 18px rgba(0,0,0,0.35);
  }

  /* Text */
  .text-muted {
    color: #9aa4af !important;
  }

  /* Price */
  .price-highlight {
    color: #2ecc71;
    font-weight: 700;
  }

  /* Stock indicator */
  .text-success {
    color: #2ecc71 !important;
  }

  .text-danger {
    color: #e74c3c !important;
  }

  /* Forms */
  .form-control {
    background-color: #252a37;
    border: 1px solid #34495e;
    color: #ffffff;
    border-radius: 10px;
  }

  .form-control:focus {
    background-color: #252a37;
    color: #ffffff;
    border-color: #3498db;
    box-shadow: 0 0 0 0.2rem rgba(52,152,219,0.25);
  }

  /* Buttons */
  .btn-primary {
    background-color: #3498db;
    border: none;
    font-weight: 600;
    border-radius: 10px;
    padding: 0.6rem 1.5rem;
  }

  .btn-primary:hover {
    background-color: #2980b9;
  }

  /* Alerts */
  .alert-info {
    background-color: rgba(52, 152, 219, 0.15);
    color: #5dade2;
    border: 1px solid #3498db;
  }
</style>


<div class="container mt-4">
  <div class="row">
    <div class="col-md-6">
      <!-- Placeholder image, you can later store image URLs in DB -->
      <div class="border product-image-box rounded p-3 text-center">
        <img src="https://via.placeholder.com/400x300?text={{ product.productName | urlencode }}"
          alt="{{ product.productName }}" class="img-fluid">
      </div>
    </div>

    <div class="col-md-6">
      <h2 class="mb-3">{{ product.productName }}</h2>
      <p class="text-muted mb-1">
        Product Code: <strong>{{ product.productCode }}</strong>
      </p>
      <p class="text-muted mb-1">
        Product Line: <strong>{{ product.productLine }}</strong>
      </p>
      <p class="text-muted mb-1">
        Scale: <strong>{{ product.productScale }}</strong>
      </p>
      <p class="text-muted mb-3">
        Vendor: <strong>{{ product.productVendor }}</strong>
      </p>

      <p class="mb-3">{{ product.productDescription }}</p>

      <p class="h4 mb-2 price-highlight">
        Price:
        {% if product.MSRP %}
        ${{ "%.2f"|format(product.MSRP) }}
        {% elif product.buyPrice %}
        ${{ "%.2f"|format(product.buyPrice) }}
        {% else %}
        Not available
        {% endif %}
      </p>

      <p class="mb-3">
        In stock:
        <span class="{% if product.quantityInStock > 0 %}text-success{% else %}text-danger{% endif %}">
          {{ product.quantityInStock }}
        </span>
      </p>

      {% if session.get("user_type") == "customer" %}
      <form action="{{ url_for('add_to_cart', product_code=product.productCode) }}" method="POST" class="mt-3">
        <div class="row g-2 align-items-center">
          <div class="col-auto">
            <label for="quantity" class="col-form-label">Quantity</label>
          </div>
          <div class="col-auto">
            <input type="number" id="quantity" name="quantity" class="form-control" min="1" value="1">
          </div>
        </div>
        {% if in_cart_qty and in_cart_qty > 0 %}
        <p class="mt-2 text-muted">
          Currently in cart: <strong>{{ in_cart_qty }}</strong>
        </p>
        {% endif %}
        <button type="submit" class="btn btn-primary mt-3">
          ðŸ›’ Add to Cart
        </button>
      </form>
      {% else %}
      {% if session.get("user_type") != "employee" %}
      <div class="alert alert-info mt-3">
        Log in as a customer to place an order.
      </div>
      {% endif %}
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}