{% extends "layout.html" %}
{% block content %}
<div class="container mt-4">
  <div class="row">
    <div class="col-md-6">
      <!-- Placeholder image, you can later store image URLs in DB -->
      <div class="border rounded p-3 text-center">
        <img src="https://via.placeholder.com/400x300?text={{ product.productName | urlencode }}"
          alt="{{ product.productName }}" class="img-fluid">
      </div>
    </div>

    <div class="col-md-6">
      <h2 class="mb-3">{{ product.productName }}</h2>
      <p class="text-muted mb-1">
        Product Code: <strong>{{ product.productCode }}</strong>
      </p>
      <p class="text-muted mb-1">
        Product Line: <strong>{{ product.productLine }}</strong>
      </p>
      <p class="text-muted mb-1">
        Scale: <strong>{{ product.productScale }}</strong>
      </p>
      <p class="text-muted mb-3">
        Vendor: <strong>{{ product.productVendor }}</strong>
      </p>

      <p class="mb-3">{{ product.productDescription }}</p>

      <p class="h4 mb-2">
        Price:
        {% if product.MSRP %}
        ${{ "%.2f"|format(product.MSRP) }}
        {% elif product.buyPrice %}
        ${{ "%.2f"|format(product.buyPrice) }}
        {% else %}
        Not available
        {% endif %}
      </p>

      <p class="mb-3">
        In stock:
        <span class="{% if product.quantityInStock > 0 %}text-success{% else %}text-danger{% endif %}">
          {{ product.quantityInStock }}
        </span>
      </p>

      {% if session.get("user_type") == "customer" %}
      <form action="{{ url_for('add_to_cart', product_code=product.productCode) }}" method="POST" class="mt-3">
        <div class="row g-2 align-items-center">
          <div class="col-auto">
            <label for="quantity" class="col-form-label">Quantity</label>
          </div>
          <div class="col-auto">
            <input type="number" id="quantity" name="quantity" class="form-control" min="1" value="1">
          </div>
        </div>
        {% if in_cart_qty and in_cart_qty > 0 %}
        <p class="mt-2 text-muted">
          Currently in cart: <strong>{{ in_cart_qty }}</strong>
        </p>
        {% endif %}
        <button type="submit" class="btn btn-primary mt-3">
          ðŸ›’ Add to Cart
        </button>
      </form>
      {% else %}
      {% if session.get("user_type") != "employee" %}
      <div class="alert alert-info mt-3">
        Log in as a customer to place an order.
      </div>
      {% endif %}
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}